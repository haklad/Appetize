<!DOCTYPE html>
<html>
<head>
<style>
* {
  box-sizing: border-box;
}

.column {
  float: left;
  width: 33.33%;
  padding: 5px;
}

/* Clearfix (clear floats) */
.row::after {
  content: "";
  clear: both;
  display: table;
}


</style>


<script>
        function init(){
            count=0;
            window.onscroll=obj.getContent;
            obj.getContent();
            /*setTimeout(function(){
            window.location.reload(1);
            }, 10000);*/
        }
        var obj={
            xhr:new XMLHttpRequest(),
            //xhr2:new XMLHttpRequest(),
            getContent:function(){
                scrollAmt = 10;
                //if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight)
                if(( count==0  ||document.documentElement.scrollTop > scrollAmt ) &&count<=2 ){
                count++;
                obj.xhr.onreadystatechange=obj.showContent;
                //console.log(count);
                obj.xhr.open("GET","http://localhost:4000/api/buzz/"+count,true);
                obj.xhr.send();
                }
                //window.onscroll=obj.getContent;

            },
            showContent:function(){
                if(this.readyState==4&&this.status==200){
                    data = this.responseText;
                    data = JSON.parse(data);
                    for (var i = 1; i <=3; i++) {
                        var object = data[i-1];
                        console.log(object,count);
                        var i2;
                        if(count==1)
                            i2=i;
                        if(count==2)
                            i2=i+3;
                        if(count==3)
                            i2=i+6;
                        var str1= i2 ;
                        var str2= i2 + "t";
                        var str3= i2 + "d";
                        var str4= i2 + "a";
                        //console.log(str1);
                        
                        imagediv = document.getElementById(str1);
                        imagediv.src=object["image"];
                        titlediv = document.getElementById(str2);
                        titlediv.innerHTML=object["rest"].bold().toUpperCase();                        
                        descdiv = document.getElementById(str3)
                        descdiv.innerHTML=object["description"];
                        adiv = document.getElementById(str4);
                        adiv.href="http://localhost:3000/?rest="+object["rest"];
                    
                    }
                    
                    /*window.onscroll= function(){
                        //console.log(document.documentElement.scrollTop);
                        obj.xhr2.onreadystatechange=obj.showContent2;
                        obj.xhr2.open("GET","http://localhost:3000/api/buzz/2",true);
                        obj.xhr2.send();

                    }*/

                }
                
            }
            /*showContent2:function(){
                if(this.readyState==4&&this.status==200){
                    data = this.responseText;
                    data = JSON.parse(data);
                    for (var i = 1; i <=3; i++) {
                        var object = data[i-1];
                        i2 = i+3;
                        var str1= i2 ;
                        var str2= i2 + "t";
                        var str3= i2 + "d";
                        //console.log(str1);
                        
                        imagediv = document.getElementById(str1);
                        imagediv.src=object["image"];
                        titlediv = document.getElementById(str2);
                        titlediv.innerHTML=object["rest"].bold().toUpperCase();
                        descdiv = document.getElementById(str3)
                        descdiv.innerHTML=object["description"];
                    
                    }
                    if(document.documentElement.scrollTop>100){
                        for (var i = 1; i <=3; i++) {
                        var object = data[i-1];
                        i2 = i+6;
                        var str1= i2 ;
                        var str2= i2 + "t";
                        var str3= i2 + "d";
                        //console.log(str1);
                        
                        imagediv = document.getElementById(str1);
                        imagediv.src=object["image"];
                        titlediv = document.getElementById(str2);
                        titlediv.innerHTML=object["rest"].bold().toUpperCase();
                        descdiv = document.getElementById(str3)
                        descdiv.innerHTML=object["description"];
                    
                    }
                    }
                }
            }*/
    }
        </script>
</head>
<body onload = "init()">

<h1 align="center">THE BUZZ</h1>
<h2 align="center">Find out what the trending places are right now</h2>
<div id = "bg">
<div class="row">
  <div class="column">
    <img id="1" src=""  alt="Snow" style="width:100%">
    <a id="1a" href ="http://localhost/applications.html"><div id = "1t" align="center" > </div> </a>
    <div id = "1d">  </div>
  </div>
  <div class="column">
    <img id="2" src=""  alt="Forest" style="width:100%">
    <a id="2a"> <div id = "2t" align="center">  </div> </a>
    <div id = "2d">  </div>
  </div>
  <div class="column">
    <img id="3" src="" alt="Mountains" style="width:100%">
    <a id="3a"><div id = "3t" align="center">  </div></a>
    <div id = "3d">  </div>
  </div>
</div>

<div class="row">
        <div class="column">
          <img id="4" src="" alt="Snow" style="width:100%">
          <a id = "4a"><div id = "4t" align="center">  </div> </a>
          <div id = "4d">  </div>
        </div>
        <div class="column">
          <img id="5" src="" alt="Forest" style="width:100%">
          <a id = "5a"><div id = "5t" align="center">  </div> </a>
          <div id = "5d">  </div>
        </div>
        <div class="column">
          <img id="6" src="" alt="Mountains" style="width:100%">
          <a id = "6a"><div id = "6t" align="center">  </div> </a>
          <div id = "6d">  </div>
        </div>
      </div>
      <div class="row">
  <div class="column">
    <img id="7" src="" alt="Snow" style="width:100%">
    <a id="7a"><div id = "7t" align="center">  </div> </a>
    <div id = "7d">  </div>
  </div>
  <div class="column">
    <img id="8" src="" alt="Forest" style="width:100%">
    <a id = "8a"><div id = "8t" align="center">  </div> </a>
    <div id = "8d">  </div>
  </div>
  <div class="column">
    <img id="9" src="" alt="Mountains" style="width:100%">
    <a id = "9a"> <div id = "9t" align="center">  </div> </a>
    <div id = "9d">  </div>
  </div>
</div>
</div>

</body>
</html>
